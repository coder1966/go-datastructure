# go-b-tree-bplus-tree
####B Tree and B+ Tree implementation for go
####B树和B+树。欢迎引用，欢迎star。
####引用方法：把btree，或bplustree子目录完整地copy到您的项目里，然后进行您希望的修改。
####=============== B 树=============
```azure
一、B树的定义
	1.定义任意非叶子结点最多只有M个儿子，且M>2；
	2.根结点的儿子数为[2, M]；
	3.除根结点以外的非叶子结点的儿子数为[M/2, M]；
	4.每个结点存放至少M/2-1（取上整）和至多M-1个关键字；（至少2个关键字）
	5.非叶子结点的关键字个数=指向儿子的指针个数-1；
	6.非叶子结点的关键字：K[1], K[2], …, K[M-1]，且K[i] < K[i+1]；
	7.非叶子结点的指针：P[1], P[2], …, P[M]，其中P[1]指向关键字小于K[1]的子树，P[M]指向关键字大于K[M-1]的子树，其它P[i]指向关键字属于(K[i-1], K[i])的子树；
	8.所有叶子结点位于同一层；

二、B树的插入操作
插入操作是指插入一个关键字（也可以是一个复杂的自定义结构体）。如果B树中已存在需要插入的关键字，则不再插入。若B树不存在这个关键字,则一定是在叶子结点中进行插入操作。
1、根据要插入的关键字的值，找到叶子结点并插入。
2、判断当前结点关键字的个数是否小于等于m-1，若满足则结束，否则进行第3步。
3、以结点中间的关键字为中心分裂成左右两部分，然后将这个中间的关键字插入到父结点中，这个关键字的左子树指向分裂后的左半部分，这个关键字的右子支指向分裂后的右半部分，然后将当前结点指向父结点，继续进行第3步。

三、B树的删除操作
删除操作是指删除该B树中的某个节点中的指定关键字，如果B树中不存对应的关键字，则删除失败。
1、如果当前需要删除的关键字位于非叶子结点上，则用后继最小关键字覆盖要删除的关键字，然后在后继关键字所在的子支中删除该后继关键字。此时后继关键字一定位于叶子结点上，这个过程和二叉搜索树删除结点的方式类似。删除这个记录后执行第2步
2、该结点关键字个数大于等于Math.ceil(m/2)-1，结束删除操作，否则执行第3步。
3、如果兄弟结点关键字个数大于Math.ceil(m/2)-1，则父结点中的关键字下移到该结点，兄弟结点中的一个关键字上移，删除操作结束。
否则，将父结点中的关键字下移与当前结点及它的兄弟结点中的关键字合并，形成一个新的结点。原父结点中的key的两个孩子指针就变成了一个孩子指针，指向这个新结点。然后当前结点的指针指向父结点，重复上第2步。
有些结点它可能即有左兄弟，又有右兄弟，那么我们任意选择一个兄弟结点进行操作即可。

```
```
I Insert插入数据
S Show完整的树
F Find查找数据
D Delete删除数据
E Exit退出
请输入指令，按回车键：

B树展示树：(父|KEY数)左腿/KEY-PAYLOAD\右腿|KEY-PAYLOAD\右腿|...
 , (nil|1)3/9-9\12|
 , (9|2)1/3-3\4|6-6\7| , (9|3)10/12-12\13|15-15\16|18-18\19|
 , (3|2)nil/1-1\nil|2-2\nil| , (3|2)nil/4-4\nil|5-5\nil| , (3|2)nil/7-7\nil|8-8\nil| , (12|2)nil/10-10\nil|11-11\nil| , (12|2)nil/13-13\nil|14-14\nil| , (12|2)nil/16-16\nil|17-17\nil| , (12|2)nil/19-19\nil|20-20\nil|
```
####=============== B+ 树=============
```azure
    一个M阶的B+树具有如下几个特征：
    B+树中每个结点中关键字个数 n 的取值范围为：⌈(m+1)/2⌉≤n≤m。
    有M个子树的中间节点包含有最大M(最小M/2)个元素（B树中是M-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。
    所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。(叶子节点有链接右侧叶子节点的单向链接。)
    所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。
    B+树中含有两个头指针，一个Root指向整棵树的根结点，另一个Sqt指向关键字最小的叶子结点。  

```

```azure

 B+树展示树：(父|KEY数)[载荷/key1|载荷/key2.....]叶子指向右兄弟指针
                                                                      (N|2)[n/31                    |                       n/52]N
                                                                              \                                                \
             (31|3)[n/15           |              n/22          |           n/31]N             (52|2)[n/47           |        n/52]N
                       \                            \                          \                         \                        \
    (52|2)[?/10|?/12|?/15]22->(52|2)[?/18|?/19|?/20|?/22]31->(52|2)[?/23|?/30|?/31]47->(52|2)[?/33|?/45|?/47]->(52|2)[?/48|?/50|?/52]N
   

```